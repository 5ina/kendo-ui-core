namespace Kendo.Mvc.UI.Fluent
{
    using Extensions;
    using System;
    using System.Linq.Expressions;

    /// <summary>
    /// Defines the fluent interface for configuring the <see cref="DataSource"/> Model definition.
    /// </summary>
    /// <typeparam name="TModel">Type of the model</typeparam>
    public class <%= type %>ModelDescriptorFactory<TModel> : DataSourceModelDescriptorFactory<TModel>, IHideObjectMembers
        where TModel : class
    {
        private <%= type %>ModelDescriptor <%= type.camelize %>Model;

        public <%= type %>ModelDescriptorFactory(<%= type %>ModelDescriptor model)
            : base(model)
        {
            <%= type.camelize %>Model = model;
        }

% members.each do |member|
        /// <summary>
        /// Specify the member used for the <%= member.name %> field.
        /// </summary>
        /// <typeparam name="TValue">Type of the field</typeparam>
        /// <param name="expression">Member access expression which describes the member</param>
        public void <%= member.name.pascalize %><TValue>(Expression<Func<TModel, TValue>> expression)
        {
            <%= type.camelize %>Model.<%= member.name.pascalize %> = expression.MemberWithoutInstance();
        }

        /// <summary>
        /// Specify the member used for the <%= member.name.pascalize %> field.
        /// </summary>
        /// <param name="fieldName">The member name.</param>
        public void <%= member.name.pascalize %>(string fieldName)
        {
            <%= type.camelize %>Model.<%= member.name.pascalize %> = fieldName;
        }

% end
    }
}
