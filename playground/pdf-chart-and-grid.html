<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="../dist/styles/web/kendo.common.css" />
    <link rel="stylesheet" href="../dist/styles/web/kendo.default.css" />
    <script src="loader.js"></script>
    <script>
      requireSync([
        "../src/jquery.js",
        "../src/kendo.all.js",
        "./console.time.js",
        "./test-pdf-helpers.js"
      ]);
    </script>
    <style>
      body {
        font-family: "DejaVu Sans";
        font-size: 12px;
      }

      #chart {
        max-width: 700px;
        margin: 0 auto 1em auto;
      }

      /* the template elements will appear only in PDF */
      .page-template {
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
      }
      .page-template .header {
        position: absolute;
        top: 40px;
        left: 30px;
        right: 30px;
        border-bottom: 1px solid #888;
        color: #888;
      }
      .page-template .footer {
        position: absolute;
        bottom: 40px;
        left: 30px;
        right: 30px;
        border-top: 1px solid #888;
        text-align: center;
        font-size: 90%;
        color: #888;
      }
      .page-template .watermark {
        font-size: 700%;
        text-align: center;
        margin-top: 63%;
        color: #00b312;
        opacity: 0.2;
        transform: rotate(-55deg) scale(2, 1.5);
      }
    </style>
  </head>
  <body>
    <button class="k-button" onclick="exportPDF()">Export PDF</button>
    <div id="container">
      <div id="chart"></div>
      <div id="grid"></div>
    </div>

    <script>
      function exportPDF() {
          kendo.drawing.drawDOM("#container", {
              paperSize : "A3",
              landscape : true,
              margin    : "3cm",
              template  : $("#page-template").html()
          }).then(function(group){
              kendo.drawing.pdf.saveAs(group, "test.pdf");
          });
      }
      $(window).ready(function(){
          $("#grid").kendoGrid({
              sortable: true,
              selectable: true,
              dataSource: [
                  { id: 1, text: "Foo" },
                  { id: 2, text: "Bar" },
                  { id: 3, text: "Baz" },
                  { id: 4, text: "Foo" },
                  { id: 5, text: "Bar" },
                  { id: 6, text: "Baz" },
                  { id: 7, text: "Foo" },
                  { id: 8, text: "Bar" },
                  { id: 9, text: "Baz" },
                  { id: 10, text: "Foo" },
                  { id: 11, text: "Bar" },
                  { id: 12, text: "Baz" },
                  { id: 13, text: "Foo" },
                  { id: 14, text: "Bar" },
                  { id: 15, text: "Baz" }
              ],
              columns: [
                  { title: "ID", field: "id" },
                  { title: "Text", field: "text" }
              ]
          });

          $("#chart").kendoChart({
              title: {
                  text: "Gross domestic product growth \n /GDP annual %/"
              },
              legend: {
                  position: "bottom"
              },
              seriesDefaults: {
                  type: "area",
                  area: {
                      line: {
                          style: "smooth"
                      }
                  }
              },
              series: [{
                  name: "India",
                  data: [3.907, 7.943, 7.848, 9.284, 9.263, 9.801, 3.890, 8.238, 9.552, 6.855]
              }, {
                  name: "World",
                  data: [1.988, 2.733, 3.994, 3.464, 4.001, 3.939, 1.333, -2.245, 4.339, 2.727]
              }, {
                  name: "Haiti",
                  data: [-0.253, 0.362, -3.519, 1.799, 2.252, 3.343, 0.843, 2.877, -5.416, 5.590]
              }],
              valueAxis: {
                  labels: {
                      format: "{0}%"
                  },
                  line: {
                      visible: false
                  },
                  axisCrossingValue: -10
              },
              categoryAxis: {
                  categories: [2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011],
                  majorGridLines: {
                      visible: false
                  },
                  labels: {
                      rotation: "auto"
                  }
              },
              tooltip: {
                  visible: true,
                  format: "{0}%",
                  template: "#= series.name #: #= value #"
              }
          });
      });
    </script>

    <script id="page-template" type="x/kendo-template">
      <div class="page-template">
        <div class="header">
          <table cellspacing="0" cellpadding="0" style="width: 100%">
            <tr>
              <td>Header</td>
              <td style="text-align: right">page #:pageNum# of #:totalPages#</td>
            </tr>
          </table>
        </div>
        <div class="footer">
          Footer.  (page #:pageNum# of #:totalPages#)
        </div>
      </div>
    </script>
  </body>
</html>
