<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="../dist/styles/web/kendo.common.css" />
    <link rel="stylesheet" href="../dist/styles/web/kendo.default.css" />
    <script src="loader.js"></script>
    <script>
      requireSync([
        "../src/jquery.js",
        "../src/kendo.all.js",
      ]);
    </script>
    <script src="./pako.min.js"></script>
    <style>
      body {
        font: 13px "DejaVu Sans";
      }
      #main {
        margin: 1em;
      }
      kendo-pdf-document {
        font-size: 80%;
      }
      /* the template elements will appear only in PDF */
      .page-template {
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
      }
      .page-template .header {
        position: absolute;
        top: 40px;
        left: 30px;
        right: 30px;
        border-bottom: 1px solid #e5e5e5;
        font-size: 90%;
        color: #888;
      }
      .page-template .company-logo {
        position: relative;
        top: -10px;
        font-size: 20px;
        font-weight: bold;
        color: #3aabf0;
      }
      .page-template .footer {
        position: absolute;
        bottom: 10px;
        left: 30px;
        right: 30px;
        border-top: 1px solid #e5e5e5;
        font-size: 90%;
        color: #888;
      }
      .for {
      }
      .from {
        float: right;
        padding-bottom: 2em;
      }
      .from p, .for p {
        color: #787878;
      }
      .pdf-body {
        clear: both;
      }
      .signature {
        padding-top: .5in;
      }
    </style>

    <script>
      function makePDF() {
        kendo.drawing.drawDOM("#content", {
          paperSize: $("#paper").val(),
          margin: {
            top: "3cm", left: "1cm", right: "1cm", bottom: "3cm"
          },
          template: $("#page-template").html()
        }).then(function(group){
          kendo.drawing.pdf.saveAs(group, "invoice.pdf");
        });
      }
    </script>

    <script type="x/kendo-template" id="page-template">
      <div class="page-template">
        <div class="header">
          <div style="float: right">Invoice \#23543</div>
          <div class="company-logo">
            <img align="center" src="../demos/mvc/content/web/framework/company-logo.png" /> Blauer See Delikatessen
          </div>
        </div>
        <div class="footer">
          <p>Blauer See Delikatessen<br />
            Lützowplatz 456<br />
            Berlin, Germany,  10785
          </p>
        </div>
      </div>
    </script>
  </head>

  <body>
    <button class="k-button" onclick="makePDF()">Generate PDF</button>
    <select id="paper">
      <option value="A4">A4</option>
      <option value="Letter">Letter</option>
      <option value="Executive">Executive</option>
    </select>
    <div id="main">

      <!-- exported element -->
      <div id="content">

        <div class="from">
          <h3>From</h3>
          <p style="padding-bottom: 20px; border-bottom: 1px solid #e5e5e5;">Hanna Moos <br />
            Lützowplatz 456<br />
            Berlin, Germany,  10785
          </p>
          <p style="padding-top: 20px;">
            Invoice ID: 23543<br />
            Invoice Date: 12.03.2014<br />
            Due Date: 27.03.2014
          </p>
        </div>

        <div class="for">
          <h3>Invoice For</h3>
          <p>Antonio Moreno<br />
            Naucalpan de Juárez<br />
            México D.F., Mexico, 53500
          </p>
        </div>

        <div class="pdf-body">
          <div id="grid"></div>
          <p class="signature">
            Signature: ________________ <br /><br />
            Date: 12.03.2014
          </p>
        </div>

      </div>

    </div>

    <script>
    $(document).ready(function() {
        var data = [
            { productName: "QUESO CABRALES", unitPrice: 21, qty: 5 },
            { productName: "ALICE MUTTON", unitPrice: 39, qty: 7 },
            { productName: "GENEN SHOUYU", unitPrice: 15.50, qty: 3 },
            { productName: "CHARTREUSE VERTE", unitPrice: 18, qty: 1 },
            { productName: "MASCARPONE FABIOLI", unitPrice: 32, qty: 2 },
            { productName: "VALKOINEN SUKLAA", unitPrice: 16.25, qty: 3 },
            { productName: "QUESO CABRALES", unitPrice: 21, qty: 5 },
            { productName: "ALICE MUTTON", unitPrice: 39, qty: 7 },
            { productName: "GENEN SHOUYU", unitPrice: 15.50, qty: 3 },
            { productName: "CHARTREUSE VERTE", unitPrice: 18, qty: 1 },
            { productName: "MASCARPONE FABIOLI", unitPrice: 32, qty: 2 },
            { productName: "VALKOINEN SUKLAA", unitPrice: 16.25, qty: 3 },
            { productName: "QUESO CABRALES", unitPrice: 21, qty: 5 },
            { productName: "ALICE MUTTON", unitPrice: 39, qty: 7 },
            { productName: "GENEN SHOUYU", unitPrice: 15.50, qty: 3 },
            { productName: "CHARTREUSE VERTE", unitPrice: 18, qty: 1 },
            { productName: "MASCARPONE FABIOLI", unitPrice: 32, qty: 2 },
            { productName: "VALKOINEN SUKLAA", unitPrice: 16.25, qty: 3 },
            { productName: "QUESO CABRALES", unitPrice: 21, qty: 5 },
            { productName: "ALICE MUTTON", unitPrice: 39, qty: 7 },
            { productName: "GENEN SHOUYU", unitPrice: 15.50, qty: 3 },
            { productName: "CHARTREUSE VERTE", unitPrice: 18, qty: 1 },
            { productName: "MASCARPONE FABIOLI", unitPrice: 32, qty: 2 },
            { productName: "VALKOINEN SUKLAA", unitPrice: 16.25, qty: 3 },
            { productName: "QUESO CABRALES", unitPrice: 21, qty: 5 },
            { productName: "ALICE MUTTON", unitPrice: 39, qty: 7 },
            { productName: "GENEN SHOUYU", unitPrice: 15.50, qty: 3 },
            { productName: "CHARTREUSE VERTE", unitPrice: 18, qty: 1 },
            { productName: "MASCARPONE FABIOLI", unitPrice: 32, qty: 2 },
            { productName: "VALKOINEN SUKLAA", unitPrice: 16.25, qty: 3 },
        ];
        var schema = {
            model: {
                productName: { type: "string" },
                unitPrice: { type: "number", editable: false },
                qty: { type: "number" }
            },
            parse: function (data) {
                $.each(data, function(){
                    this.total = this.qty * this.unitPrice;
                });
                return data;
            }
        };
        var aggregate = [
            { field: "qty", aggregate: "sum" },
            { field: "total", aggregate: "sum" }
        ];
        var columns = [
            { field: "productName", title: "Product", footerTemplate: "Total"},
            { field: "unitPrice", title: "Price", width: 120},
            { field: "qty", title: "Pcs.", width: 120, aggregates: ["sum"], footerTemplate: "#=sum#" },
            { field: "total", title: "Total", width: 120, aggregates: ["sum"], footerTemplate: "#=sum#" }
        ];
        var grid = $("#grid").kendoGrid({
            editable: false,
            sortable: true,
            dataSource: {
                data: data,
                aggregate: aggregate,
                schema: schema,
            },
            columns: columns
        }).data("kendoGrid");

        $("#paper").kendoDropDownList();
    });
    </script>

  </body>
</html>
