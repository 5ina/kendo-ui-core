<!DOCTYPE html>
<html>
  <head>
    <link ref="stylesheet" href="../dist/styles/web/kendo.common.css" />
    <link ref="stylesheet" href="../dist/styles/web/kendo.default.css" />

    <script src="loader.js"></script>
    <script>
      requireSync([
        "../src/jquery.js",
        "../src/kendo.pdf.js"
      ]);
    </script>
  </head>
  <body>

    <div id="surface" style="border: 1px solid black"></div>
    <button onclick="getPDF()">Get PDF</button>

    <script>

      function getPDF() {
        d.pdf.toDataURL(main, function(url){
          kendo.saveAs({ dataURI: url, fileName: "kendo.pdf", proxyURL: "http://kendo.local:7569/" });
        });
      }

      var d = kendo.dataviz.drawing;
      var geo = kendo.dataviz.geometry;

      kendo.pdf.defineFont({
        "FreeMono|Bold|Italic"  : "./freefont/FreeMonoBoldOblique.ttf",
        "FreeMono|Bold"         : "./freefont/FreeMonoBold.ttf",
        "FreeMono|Italic"       : "./freefont/FreeMonoOblique.ttf",
        "FreeMono"              : "./freefont/FreeMono.ttf",
        "FreeSans|Bold|Italic"  : "./freefont/FreeSansBoldOblique.ttf",
        "FreeSans|Bold"         : "./freefont/FreeSansBold.ttf",
        "FreeSans|Italic"       : "./freefont/FreeSansOblique.ttf",
        "FreeSans"              : "./freefont/FreeSans.ttf",
        "FreeSerif|Bold|Italic" : "./freefont/FreeSerifBoldItalic.ttf",
        "FreeSerif|Bold"        : "./freefont/FreeSerifBold.ttf",
        "FreeSerif|Italic"      : "./freefont/FreeSerifItalic.ttf",
        "FreeSerif"             : "./freefont/FreeSerif.ttf"
      });

      var surface = d.Surface.create($("#surface"), {
          width: 600,
          height: 400,
          type: "svg",
      });

      var main = new d.Group();
      surface.draw(main);

      var circleGeometry = new geo.Circle([100, 100], 60);
      var circle = new d.Circle(circleGeometry).stroke("red", 1).fill("yellow");
      circle.fill().opacity = 0.3;
      main.append(circle);

      var a1 = 40, a2 = 140;
      var b1 = -40, b2 = -140;
      for (var i = 0; i < 60; i += 2.5) {
          var arcGeometry = new geo.Arc([100, 100], {
              radiusX: i,
              radiusY: i,
              startAngle: a1,
              endAngle: a2
          });
          var arc = new d.Arc(arcGeometry).stroke("red", 0.4);
          main.append(arc);
          var arcGeometry = new geo.Arc([100, 100], {
              radiusX: i,
              radiusY: i,
              startAngle: b1,
              endAngle: b2,
              anticlockwise: true
          });
          var arc = new d.Arc(arcGeometry).stroke("red", 1);
          arc.stroke().opacity = 0.5;
          main.append(arc);

          a1 += 5; a2 += 5;
          b1 += 5; b2 += 5;
      }

      var position = new geo.Point(100, 100);
      var text = new d.Text("DAS TEXT ☺", position);
      main.append(text);

      var text = new d.Text("<b>foo</b>", new geo.Point(300, 100));
      text.options.font = "italic 40px FreeMono";
      text.stroke("red", 0.7);
      //text.stroke().dashType = "dash";
      text.fill("#23c");
      text.fill().opacity = 0.5;
      main.append(text);

      var text = new d.Text("Kendo UI ♕", new geo.Point(300, 60));
      text.options.font = "40px FreeSerif";
      main.append(text);

      var text = new d.Text("ăşţîâ ĂŞŢÎÂ", new geo.Point(300, 20));
      text.options.font = "bold 40px FreeSerif";
      main.append(text);

      var path = new d.Path({ closed: true })
          .moveTo(100, 300)
          .curveTo([100, 200], [250, 200], [250, 300])
          .lineTo(100, 300);
      path.stroke().width = 10;
      path.stroke().lineJoin = "round";
      main.append(path);

      var multiPath = new d.MultiPath()
          .moveTo(100, 200).curveTo([100, 100], [250, 100], [250, 200]).close()
          .moveTo(150, 150).lineTo(200, 150).close();
      multiPath.stroke().dashType = "dash";
      multiPath.opacity(0.3);
      main.append(multiPath);

      var group = new d.Group();
      var pathA = new d.Path().moveTo(298, 98).lineTo(302, 102);
      var pathB = new d.Path().moveTo(298, 102).lineTo(302, 98);
      group.append(pathA, pathB);
      main.append(group);

      var rect = new geo.Rect([ 300, 200 ], [ 213.34, 145.67 ]);
      var image = new d.Image("./images/1.jpg", rect);
      main.append(image);

      var rect = new geo.Rect([ 300, 160 ], [ 107, 35 ]);
      var image = new d.Image("./diagram/Generic/telerik-logo.png", rect);
      main.append(image);

      console.log(main.clippedBBox());

    </script>

  </body>
</html>
