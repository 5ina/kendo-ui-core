<!DOCTYPE html>
<html>
  <head>
    <style>html { font-size: 12px; font-family: Arial, Helvetica, sans-serif; }</style>
    <title></title>
    <link rel="stylesheet" href="../styles/web/kendo.common.css" />
    <link rel="stylesheet" href="../styles/web/kendo.default.css" />

    <script src="loader.js"></script>
    <script>
      requireSync([
        "../src/jquery.js",
        "../src/kendo.all.js"
      ]);
    </script>

    <style>
      .k-editor-output {
        position: absolute;
        left: -4000px;
        top: -10000px;
      }
      .a4 { width: 595.28px; }
      .k-editor-page {
        margin: 1cm;
      }
    </style>
  </head>

  <body>
    <button>Export to PDF</button>
    <div id="example">
      <div id="target"></div>
      <textarea id="editor" rows="10" cols="30" style="height:440px">
        <p style="text-align: center"><img src="kendo-ui-web.png" alt="Editor for ASP.NET MVC logo" /></p>
        <p>
          Kendo UI Editor allows your users to edit HTML in a familiar, user-friendly way.<br />
          In this version, the Editor provides the core HTML editing engine, which includes basic text formatting, hyperlinks, lists,
          and image handling. The widget <strong>outputs identical HTML</strong> across all major browsers, follows
          accessibility standards and provides API for content manipulation.
        </p>
        <p>Features include:</p>
        <span class="pageBreak"></span>
        <ul>
          <li>Text formatting & alignment</li>
          <li>Bulleted and numbered lists</li>
          <li class="pageBreak">Hyperlink and image dialogs</li>
          <li>Cross-browser support</li>
          <li>Identical HTML output across browsers</li>
          <li>Gracefully degrades to a <code>textarea</code> when JavaScript is turned off</li>
        </ul>
        <span class="pageBreak"></span>
        <p>
          Read <a href="http://docs.telerik.com/kendo-ui">more details</a> or send us your
          <a href="http://www.telerik.com/forums/">feedback</a>!
        </p>
      </textarea>

      <script>

        function exportToPDF(){
            var editor = $("#editor").getKendoEditor();
            var container = $("<div class='k-editor-output a4'><div class='k-editor-page'>");
            var output = $(".k-editor-page", container);
            var drawing = kendo.drawing;

            output.html($(editor.body).html());
            $(document.body).append(container);

            drawing.drawDOM(output, {
                forcePageBreak: ".pageBreak"
            })
            .then(function(root) {
                container.remove();
                return drawing.exportPDF(root, {
                    multiPage: true,
                    paperSize: "a4"
                });
            })
            .done(function(data) {
                kendo.saveAs({
                    dataURI: data,
                    fileName: "editor.pdf"
                });
            });
        }

        $("button").click(function() {
            exportToPDF();
        });

        $(document).ready(function() {
            $("#editor").kendoEditor();
        });
      </script>
    </div>


  </body>
</html>
