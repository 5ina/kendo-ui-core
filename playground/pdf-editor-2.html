<!DOCTYPE html>
<html>
  <head>
    <style>html { font-size: 12px; font-family: Arial, Helvetica, sans-serif; }</style>
    <title></title>
    <link rel="stylesheet" href="../styles/web/kendo.common.css" />
    <link rel="stylesheet" href="../styles/web/kendo.default.css" />

    <script src="loader.js"></script>
    <script>
      requireSync([
        "../src/jquery.js",
        "../src/kendo.all.js"
      ]);
    </script>
  </head>

  <body>
    <button>Export to PDF</button>
    <div id="example">
      <div id="target"></div>
      <textarea id="editor" rows="10" cols="30" style="height:440px">
        <p style="text-align: center"><img src="kendo-ui-web.png" alt="Editor for ASP.NET MVC logo" /></p>
        <p style="text-align: justify">
          Kendo UI Editor allows your users to edit HTML in a familiar,
          user-friendly way.<br />  In this version, the Editor provides the
          core HTML editing engine, which includes basic text formatting,
          hyperlinks, lists, and image handling. The widget <strong>outputs
          identical HTML</strong> across all major browsers, follows
          accessibility standards and provides API for content manipulation.
        </p>
        <p>Features include:</p>
        <span class="pageBreak"></span>
        <ul>
          <li>Text formatting & alignment</li>
          <li>Bulleted and numbered lists</li>
          <li class="pageBreak">Hyperlink and image dialogs</li>
          <li>Cross-browser support</li>
          <li>Identical HTML output across browsers</li>
          <li>Gracefully degrades to a <code>textarea</code> when JavaScript is turned off</li>
        </ul>
        <span class="pageBreak"></span>
        <p>
          Read <a href="http://docs.telerik.com/kendo-ui">more details</a> or send us your
          <a href="http://www.telerik.com/forums/">feedback</a>!
        </p>
      </textarea>

      <script>

        function exportToPDF(){
            var editor = $("#editor").getKendoEditor();
            var doc = editor.body.ownerDocument;
            var drawing = kendo.drawing;

            <!-- var cont = doc.createElement("kendo-pdf-container"); -->
            <!-- $(cont).html(editor.body.innerHTML); -->
            <!-- editor.body.appendChild(cont); -->

            drawing.drawDOM(editor.body, {
                forcePageBreak: ".pageBreak"
            })
            .then(function(root) {
                <!-- $(cont).remove(); -->
                return drawing.exportPDF(root, {
                    multiPage: true,
                    paperSize: "a4"
                });
            })
            .done(function(data) {
                kendo.saveAs({
                    dataURI: data,
                    fileName: "editor.pdf",
                    proxyURL: "http://kendo.local:7569/"
                });
            });
        }

        $("button").click(function() {
            exportToPDF();
        });

        $(document).ready(function() {
            window.editor = $("#editor").kendoEditor({
                stylesheets: [ "./pdf-editor-2.css" ]
            }).getKendoEditor();
        });
      </script>
    </div>


  </body>
</html>
