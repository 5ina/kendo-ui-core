<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <link rel="stylesheet" href="../dist/styles/web/kendo.common-bootstrap.css" />
    <link rel="stylesheet" href="../dist/styles/web/kendo.bootstrap.css" />

    <script src="loader.js"></script>
    <script>
      requireSync([
        "../src/jquery.js",
        "../src/kendo.all.js"
      ]);
    </script>
    <script src="pako.min.js"></script>
    <style>
        body, .k-widget {
          font-family: "DejaVu Serif";
          font-size: 12px;
        }
        /* the template elements will appear only in PDF */
        .page-template {
          position: absolute;
          width: 100%;
          height: 100%;
          top: 0;
          left: 0;
        }
        .page-template .header {
          position: absolute;
          top: 30px;
          left: 30px;
          right: 30px;
          border-bottom: 1px solid #888;
          color: #888;
        }
        .page-template .footer {
          position: absolute;
          bottom: 30px;
          left: 30px;
          right: 30px;
          border-top: 1px solid #888;
          text-align: center;
          color: #888;
        }
        .page-template .watermark {
          font-size: 600%;
          text-align: center;
          margin-top: 30%;
          color: #00b312;
          opacity: 0.1;
          transform: rotate(-35deg) scale(1.7, 1.5);
        }
    </style>
  </head>
  <body>
      <div id="grid"></div>
      <script>
          $(document).ready(function () {
              $("#grid").kendoGrid({
                  toolbar: ["pdf"],
                  pdf: {
                      allPages: true,
                      avoidLinks: true,
                      paperSize: "A4",
                      margin: { top: "2cm", left: "1cm", right: "1cm", bottom: "2cm" },
                      landscape: true,
                      repeatHeaders: true,
                      template: $("#page-template").html(),
                      scale: 0.8
                  },
                  pdfExport: function(e) {
                      e.promise.progress(function(e) {
                          //e.content = formatPage(e.content);
                          console.log(kendo.format("{0:P}", e.progress));
                      });
                  },
                  dataSource: {
                      type: "odata",
                      serverPaging: true,
                      transport: {
                          read: "http://demos.telerik.com/kendo-ui/service/Northwind.svc/Customers"
                      },
                      pageSize: 20
                  },
                  height: 550,
                  groupable: true,
                  sortable: true,
                  pageable: {
                      refresh: true,
                      pageSizes: true,
                      buttonCount: 5
                  },
                  columns: [{
                      field: "ContactName",
                      title: "Contact Name",
                      width: 200
                      }, {
                      field: "ContactTitle",
                      title: "Contact Title"
                      }, {
                      field: "CompanyName",
                      title: "Company Name"
                      }, {
                      field: "Country",
                      width: 150
                  }]
              });

              window.grid = $("#grid").data("kendoGrid");
          });
      </script>
      <script type="x/kendo-template" id="page-template">
        <div class="page-template">
          <div class="header">
            <div style="float: right">Page #: pageNum # of #: totalPages #</div>
            Multi-page grid with automatic page breaking
          </div>
          <div class="watermark">♥ Kendo ☺</div>
          <div class="footer">
            Das footer.
            Page #: pageNum # of #: totalPages #
          </div>
        </div>
      </script>
  </body>
</html>
